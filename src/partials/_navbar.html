<!-- Hide the navbar by default, for station sites -->
<!-- See information in the `nav.js` file on why this is done -->
<%
  var classify = function(str) {
    return str
      .toLowerCase()
      .replace(/\s+/g, "-")
      .replace(/\-\-+/g, "-")
      .replace(/^-+|[^\w\-]|-+$/g, "");
  };

  var { nav, states, footer } = grunt.data.json;
  var stateList = Object.keys(states).filter(d => !d.includes("-") && !states[d].district && states[d].active === true);
%>

<nav class="results-nav remove-embedded">
  <div class="constrained">

    <div class="results-logo">
      <a href="https://npr.org"><img src="./assets/logo.svg" alt="NPR" /></a>
      <hr aria-hidden="true" />
      <a href="https://www.npr.org/sections/elections/">
        <img src="assets/elections-2024-logo-color-horizontal.svg" alt="2024 Elections" />
      </a>
    </div>

    <ul class="menu-contents" id="main-menu">

      <li class="main-menu-item"> <a href="<%= footer[0].url %>" target="_blank">
        <span class="full label">Live coverage</span>
        <span class="abbrev label">Live</span>
      </a> </li>

      <% for (var state of stateList) {%>
      <li class="main-menu-item">
        <a href="<%= classify(states[state].name) + ".html" %>">
          <span class="full label"><%= states[state].name == "District of Columbia" ? "D.C." : states[state].name %></span>
          <span class="abbrev label"><%= states[state].ap %></span>
        </a>
      </li>
      <%}%>

      <li class=" main-menu-item state-nav" style="display: none;">
        <button class="menu-toggle" aria-controls="states-menu">
          State <span class="full label">results</span>
          <svg viewBox="0 0 5 5" preserveAspectRatio="none" aria-hidden="true">
            <path fill="currentColor" d="M1,1.5 L4,1.5 L2.5,4 Z" />
          </svg>
        </button>

        <ul class="states menu-contents" id="states-menu">
          <% for (var state of stateList) {%>
          <li class="state-menu-item">
            <a href="<%= classify(states[state].name) + ".html" %>"><%= states[state].name == "District of Columbia" ? "D.C." : states[state].name %></a>
          </li>
          <%}%>
        </ul>
      </li>

    </ul>

    <div class="donate">
      <a href="https://www.npr.org/donations/support">
        Donate
      </a>
    </div>

  </div>
</nav>
